---
tags:
  - JWT
  - OAUTH2
---
---
##  1. 이메일 중복 문제

###  Oauth 로그인 또는 기본 회원가입 시 이메일이 겹칠 경우


예상시나리오
1.  기본회원가입 후 Oauth 로그인
2.  Oauth로그인한 후에 기본회원가입시도
3.  Oauth로그인한 이후에 다른 Oauth provider로 로그인 시도

해결방법
-  기본회원가입시 이메일 인증과정 추가
- User 엔티티에 provider 필드에 ,로 구분된 로그인 방식을 추가
	- DEFAULT, GITHUB, GOOGLE
- 기존 User 튜플이 존재하는데 이메일 인증이 성공된 상태로 회원가입 하거나  1,3번 케이스의 경우 User 튜플의  provider필드 업데이트해서 일원화


## 2. Github Oauth2 구현시 이메일이 없는 문제

1. 의 방법을 전면 철회
2. provider + providerId 조합으로 사용자 구분


## 3. 이미 로그인한 상태에서 주소창을 통해 로그인 화면으로 이동 및 로그인 시도 가능


- 기존아이디로 로그인한 토큰이 만료처리 되지않는 문제

해결방법
- 로그인, 회원가입 경로에 대해서 컨트롤러 단에서 로그인 여부 체크 및 로그인돼있을 경우 메인페이지로 리다이렉트 처리




